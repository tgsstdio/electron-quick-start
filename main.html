<!DOCTYPE html>
<html>
  <head>
    <meta charset='UTF-8'>
    <title>mg-asset-wrangler</title>

    <!-- CSS Reset -->
    <link rel='stylesheet' href='node_modules/normalize.css/normalize.css' />
    <!-- Google Fonts -->
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic' />
    <!-- Milligram CSS minified -->
    <link rel='stylesheet' href='node_modules/milligram/dist/milligram.min.css'>
  </head>
  <body>
    <div id='container' />
  </body>
<script>
  const Inferno = require('inferno')
  const Component = require('inferno-component')
  const createElement = require('inferno-create-element')
  const ipc = require('electron').ipcRenderer

  class EncodingSchemaSelector extends Component {
    constructor(props) {
      super(props)
      this.state = {

      }
    }

    render() {
      
      return createElement(
        'div'
        , { className: 'row' }
        , createElement(
          'div'
          , { id: 'block_structure', className: 'column column-90' }
          , createElement('h2', null, 'Block encoding')
          , createElement(
            'select'
            , null
            , createElement(
              'option'
              , { 
                value: 'masked-32'
                , selected: true
              }
              , 'Masked 32-bit'
            )
            , createElement(
              'option'
              , { 
                value: 'masked-64'
                , selected: true
              }
              , 'Masked 64-bit'
            )
            , createElement(
              'option'
              , { 
                value: 'zipped-mask-32'
                , selected: true
              }
              , 'Masked 32-bit (Zipped)'
            )                        
          )
        )
      )

    }
  }

  class AssetIdGenerator extends Component {
    constructor (props) {
      super(props)
      this.state = {
        title: props.title
        , encodingSchema: props.encodingSchema
        , required: false
        , blockMask: 'ffff0000'
        , indexMask: '0000ffff'
        , blockNumber: props.blockNumber
        , indexNumber: props.indexNumber
      }
    }

    render () {

      return createElement(
        'div'
        , { className:'row' }
        , createElement(
          'div'
          , { id: 'asset_identifier', className: 'column column-90' }
          , createElement(
            'h2'
            , null
            , 'Generate asset identifier'
          )
          , createElement(
            'form'
            , null
            , createElement(
              'h3'
              , null
              , 'Block encoding : '
              , createElement(
                'span'
                , { id: 'block_encoding' }
                , this.state.encodingSchema
              )
            )
            , createElement(
              'fieldset'
              , null
              , createElement(
                'label'
                , { for : 'blockMask' }
                , 'Block mask'
              )
              , createElement(
                'input'
                , { 
                  id: 'blockMask'
                  , type: 'text'
                  , placeholder:'Enter front bitwise mask here (in hexadecimal)'
                  , required: true
                  , value: this.state.blockMask
                }
                , null
              )
              , createElement(
                'label'
                , { for : 'indexMask' }
                , 'Index mask'
              )
              , createElement(
                'input'
                , { 
                  id: 'indexMask'
                  , type: 'text'
                  , placeholder:'Enter back bitwise mask here (in hexadecimal)'
                  , required: true
                  , value: this.state.indexMask
                }
                , null
              )
              , createElement(
                'label'
                , { for : 'blockNumber' }
                , 'Block number'
              )
              , createElement(
                'input'
                , { 
                  id: 'blockNumber'
                  , type: 'number'
                  , min: 0
                  , placeholder: 'Enter a block number here'
                  , required: true
                  , value: this.state.blockNumber
                }
                , null
              )
              , createElement(
                'label'
                , { for : 'indexNumber' }
                , 'Index number'
              )
              , createElement(
                'input'
                , { 
                  id: 'indexNumber'
                  , type: 'number'
                  , min: 0
                  , placeholder: 'Enter a index number here'
                  , required: true
                  , value: this.state.indexNumber
                }
                , null
              )
              , createElement(
                'input'
                , { 
                  className : 'button-primary' 
                  , type: 'submit'
                  , value: 'Generate'
                }
              )                                                     
            )
          )
        )
      )

    }
  }

  class OperatingSystemSelector extends Component {
    constructor(props) {
      super(props)
      this.state = {

      }
    }

    render() {
      return createElement(
        'div'
        , { className:'row' }
        , createElement(
          'div'
          , { 
            id: 'operating_system'
            , className: 'column column-90'
          }
          , createElement('h2', null, 'Operating system')
          , createElement(
            'select'
            , null
            , createElement(
              'option'
              , { value: 'win' }
              , 'Windows'
            )
            , createElement(
              'option'
              , { value: 'mac' }
              , 'Mac'
            )            
          )
        )
      )
    }
  }

  class DestinationFolderExplorer extends Component {
    constructor(props) {
      super(props)
      this.state = {}
    }

    render() {
      return createElement(
        'div'
        , { className: 'row' }
        , createElement(
          'div'
          , { id: 'dest_folder', className: 'column column-90'}
          , createElement('h2', null, 'Destination folder')
          , createElement(
            'input'
            , { 
              id: 'output'
              , type: 'url'
              , value: 'file://'
            }
            , null
          )
          , createElement('br', null, 'null')
          , createElement(
            'h3'
            , { id: 'existing_assets' }
            , 'Existing assets'
          )
          , createElement(
            'table'
             , null
             , createElement(
               'thead'
               , null
               , createElement(
                 'tr'
                 , null
                 , createElement('th', null, 'Asset Id')
                 , createElement('th', null, 'File type')
               )
             )
             , createElement(
               'tbody'
               , null
               // add new row here
               , null
             )
          )                    
        )
      )
    }
  }

  class AssetWrangler extends Component {
    constructor(props) {
      super(props)
      this.state = {
        assetGenerator: props.assetGenerator
        , encodingSchema: props.encodingSchema
      }
    }

    render() {     
      return createElement(
        'body'
        , null
        , createElement(
          'h1'
          , null
          , 'mg-asset-wrangler' 
        )
        , createElement(
          'div'
          , { className: 'container' }
          , createElement(
            EncodingSchemaSelector
            , this.state.encodingSchema
            , null
          )
          , createElement('hr', null, null)
          , createElement(
            OperatingSystemSelector
            , null
            , null
          )
          , createElement('hr', null, null)
          , createElement(
            DestinationFolderExplorer
            , null
            , null
          )          
          , createElement('hr', null, null)
          , createElement(
            AssetIdGenerator
            , this.state.assetGenerator
            , null          
          )
          , createElement('hr', null, null)   
        )
      )
    }
  }

  var canvas = document.getElementById('container')

  if (canvas !== null)
  {
    console.log('is canvas')
  } else {
    console.log('missing')
  }

  var appData = {
    assetGenerator : { encodingSchema: '32-bit', blockNumber: 1, indexNumber : 0 }
    , encodingSchema : { }
  }

  var elem = createElement(AssetWrangler, appData)
  Inferno.render(elem, canvas)
</script>

</html>